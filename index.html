<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The New Invisible College</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        :root {
            --paper-bg: #faf8f2;
            --paper-border: #d4cfc3;
            --ink: #3a3a3a;
            --ink-soft: #615c54;
            --accent: #8c6b45; 
        }

        body {
            margin: 0; padding: 0;
            font-family: "Libre Baskerville", "Times New Roman", serif;
            background: var(--paper-bg); color: var(--ink);
            overflow: hidden; 
        }

        header {
            text-align: center; padding: 1.5rem 0;
            border-bottom: 1px solid var(--paper-border);
            background: var(--paper-bg);
            z-index: 100; position: relative;
        }

        .container {
            display: flex; height: calc(100vh - 100px);
            position: relative;
        }

        /* Sidebar */
        .sidebar {
            width: 350px; border-right: 1px solid var(--paper-border);
            background: #fdfbf6; padding: 20px;
            overflow-y: auto; z-index: 10;
        }

        .sidebar h2 { font-size: 1.3rem; color: var(--accent); margin-top: 0; }
        .relation-box { 
            margin-top: 20px; padding: 12px; 
            border-left: 3px solid var(--accent); 
            background: rgba(140, 107, 69, 0.05);
            font-size: 0.9rem;
        }

        /* Diagram Area */
        .diagram-container {
            flex: 1; position: relative; cursor: grab;
            background-color: #ffffff;
            user-select: none;
            overflow: hidden;
        }

        .diagram-container:active { cursor: grabbing; }
        svg { width: 100%; height: 100%; }

        /* Zoom Controls */
        .zoom-controls {
            position: absolute;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 999;
        }
        
        .zoom-btn {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            background: var(--accent);
            color: white;
            border: none;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .zoom-btn:hover {
            background: #6d5234;
            transform: translateY(-2px);
        }

        /* Elements */
        .link { stroke: #d4cfc3; stroke-opacity: 0.5; stroke-width: 1.5; fill: none; transition: 0.3s; }
        .link.active { stroke: var(--accent); stroke-opacity: 1; stroke-width: 2.5; }
        .node circle { fill: white; stroke: var(--accent); stroke-width: 2; transition: 0.3s; }
        .node:hover circle { fill: #fff5e6; r: 15; }
        .node-text { font-size: 11px; fill: var(--ink); pointer-events: none; font-weight: bold; }
    </style>
</head>
<body>

<header>
    <div style="font-size: 1.8rem; font-weight: 600;">The New Invisible College</div>
    <div style="font-size: 0.8rem; letter-spacing: 2px; color: var(--ink-soft);">A GENEALOGY OF MODERN PHYSICS</div>
</header>

<div class="container">
    <aside class="sidebar" id="sidebar">
        <div id="intro">
            <h2>Notes</h2>
            <p style="font-size: 0.9rem; color: var(--ink-soft);">Click on a scientist to reveal their connections. Drag the background to pan, or use the buttons to zoom.</p>
        </div>
        <div id="details" style="display:none;">
            <h2 id="s-name">Scientist</h2>
            <p id="s-bio" style="font-size: 0.95rem; line-height: 1.6;"></p>
            <hr style="border: 0; border-top: 1px solid var(--paper-border); margin: 20px 0;">
            <div id="s-links"></div>
        </div>
    </aside>

    <main class="diagram-container" id="canvas">
        <div class="zoom-controls">
            <button class="zoom-btn" onclick="manualZoom(1.25)">＋</button>
            <button class="zoom-btn" onclick="manualZoom(0.8)">－</button>
        </div>

        <svg id="scene">
            <g id="main-group"></g>
        </svg>
    </main>
</div>

<script>
/* --- 数据配置 --- */
const groups = {
    "stat":    { x: 500, y: 50,  label: "Statistical Physics" },
    "atomic":  { x: 750, y: 150, label: "Atomic Model" },
    "rel":     { x: 250, y: 200, label: "Relativity & Atomic Theory" },
    "qm":      { x: 550, y: 350, label: "Quantum Mechanics" },
    "condensed":{ x: 950, y: 400, label: "Condensed Matter" },
    "nuclear": { x: 250, y: 500, label: "Nuclear Physics" },
    "astro":   { x: 800, y: 550, label: "Astrophysics" },
    "field":   { x: 550, y: 700, label: "Quantum Field Theory" }
};

const nodes = [

    // Statistical Physics (起源)
    
    { id: "boltzmann", label: "L. Boltzmann", group: "stat", bio: "Boltzmann's greatest achievements were the development of statistical mechanics and the statistical explanation of the second law of thermodynamics." },
    
    { id: "maxwell", label: "J. C. Maxwell", group: "stat", bio: "Maxwell was a key figure in the classical theory of electromagnetic radiation and the creation of statistical theory." },
    
    { id: "ehrenfest", label: "P. Ehrenfest", group: "stat", bio: "Ehrenfest made major contributions to statistical mechanics and its relation to quantum mechanics, including the theory of phase transition and the Ehrenfest theorem. " },
    
    
    
    // Atomic & Early Quantum
    
    { id: "thomson", label: "J.J. Thomson", group: "atomic", bio: "Discovered Electron." },
    
    { id: "rutherford", label: "E. Rutherford", group: "atomic", bio: "核物理之父。通过散射实验发现原子核。" },
    
    { id: "bohr", label: "N. Bohr", group: "atomic", bio: "哥本哈根学派教父，提出量子化轨道原子模型。" },
    
    { id: "planck", label: "M. Planck", group: "qm", bio: "发现普朗克常数 $h$，开启量子时代。" },
    
    
    
    // Relativity & Roots
    
    { id: "michelson", label: "A. Michelson", group: "rel", bio: "迈克耳孙-莫雷实验证明了以太不存在。" },
    
    { id: "lorentz", label: "H. Lorentz", group: "rel", bio: "洛伦兹变换。爱因斯坦敬重的经典物理集大成者。" },
    
    { id: "einstein", label: "A. Einstein", group: "rel", bio: "相对论创立者。量子力学的最初推动者与终身质疑者。" },
    
    { id: "bose", label: "S. Bose", group: "rel", bio: "玻色-爱因斯坦统计。提出了光子的量子统计方法。" },
    
    { id: "perrin", label: "J. Perrin", group: "rel", bio: "通过布朗运动实验证实了原子的存在。" },
    
    { id: "de_Broglie", label: "de Broglie", group: "rel", bio: "" },
    
    
    
    // Quantum Mechanics (核心层)
    
    { id: "born", label: "M. Born", group: "qm", bio: "提出波函数的概率解释，量子力学数学框架的奠基人。" },
    
    { id: "heisenberg", label: "W. Heisenberg", group: "qm", bio: "矩阵力学与不确定性原理。波尔的得意门生。" },
    
    { id: "schrodinger", label: "E. Schrodinger", group: "qm", bio: "波动力学创立者。薛定谔方程 $\\hat{H}\\psi = E\\psi$。" },
    
    { id: "pauli", label: "W. Pauli", group: "qm", bio: "不相容原理。物理学的“良心”，极为毒舌且严谨。" },
    
    { id: "dirac", label: "P. Dirac", group: "qm", bio: "狄拉克方程。完美统一了量子力学与狭义相对论。" },
    
    
    
    // Condensed Matter & Soviet School
    
    { id: "ioffe", label: "A. Ioffe", group: "condensed", bio: "苏联物理学之父，半导体研究先驱。" },
    
    { id: "kapitsa", label: "P. Kapitsa", group: "condensed", bio: "发现液氦的超流性。" },
    
    { id: "landau", label: "L. Landau", group: "condensed", bio: "全才物理学家，凝聚态物理的领袖。" },
    
    
    
    // Nuclear & Astrophysics
    
    { id: "meitner", label: "L. Meitner", group: "nuclear", bio: "核裂变理论解释者。唯一没有获得诺奖的裂变发现者。" },
    
    { id: "oppenheimer", label: "J. Oppenheimer", group: "nuclear", bio: "曼哈顿计划领导者，量子力学在美国的传播者。" },
    
    { id: "teller", label: "E. Teller", group: "nuclear", bio: "氢弹之父。与奥本海默关系复杂。" },
    
    { id: "fermi", label: "E. Fermi", group: "nuclear", bio: "原子能之父。理论与实验兼长的全才。" },
    
    { id: "fowler", label: "R. Fowler", group: "astro", bio: "统计力学大师。狄拉克和钱德拉塞卡的导师。" },
    
    { id: "chandrasekhar", label: "S. Chandrasekhar", group: "astro", bio: "发现白矮星质量极限（钱德拉塞卡极限）。" },
    
    
    
    // High Energy & Particle (新生代)
    
    { id: "yukawa", label: "H. Yukawa", group: "field", bio: "预言介子，解释强相互作用。" },
    
    { id: "feynman", label: "R. Feynman", group: "field", bio: "路径积分，费曼图。量子电动力学大师。" },
    
    { id: "sakharov", label: "A. Sakharov", group: "field", bio: "苏联氢弹之父。重子失衡理论。" },
    
    { id: "wu", label: "C.S. Wu (吴健雄)", group: "field", bio: "物理学第一夫人。实验证实了宇称不守恒。" },
    
    { id: "lee", label: "T.D. Lee (李政道)", group: "field", bio: "提出弱相互作用下宇称不守恒。" },
    
    { id: "yang", label: "C.N. Yang (杨振宁)", group: "field", bio: "杨-米尔斯场论，杨-巴克斯特方程。当代最伟大的物理学家之一。" }

];

const links = [
    { from: "boltzmann", to: "maxwell", note: "Boltzmann introduced external potential in 1868 to the Maxwell distribution that was established in 1860. This set the basis of the Boltzmann equation in 1872. (Sklar, Lawrence (1993). Physics and Chance: Philosophical Issues in the Foundations of Statistical Mechanics. New York: Cambridge University Press.)" },
    { from: "boltzmann", to: "ehrenfest", note: "Ehrenfest attended Boltzmann's lectures on the mechanical theory of heat during 1899-1900. (Boltzmann then left Vienna for Leipzig) Suddenly, thanks mainly to Boltzmann, the negative thoughts about education which he had at school were replaced with a great love for mathematics and physics. He obtained his doctorate from Vienna in 1904, under Boltzmann's supervision, on a topic in classical mechanics The motion of rigid bodies in fluids and the mechanics of Hertz.(mac tutor, the making of a theoretical physicist)" },
    { from: "boltzmann", to: "planck", note: "'In doing so he had to reject his belief that the second law of thermodynamics was an absolute law of nature, and accept Boltzmann's interpretation that it was a statistical law.' Mac tutor. Planck borrowed Boltzmann's method to avoid ultraviolet catastrophe, which led to the idea of quantum. (Although Boltzmann fought for atoms, he considered discretization merely as a mathematical approach) Planck was also the first one to establish the Boltzmann constant." },
    { from: "boltzmann", to: "einstein", note: "1905, brownian motion -> proof of the existence of atoms; Einstein further discovered that Bose's method of counting applied not only to light but also to atoms, and that it produced a remarkable condensation phenomenon at low temperatures." },
    { from: "boltzmann", to: "lorentz", note: "lorentz applied Boltzmann euqation to explore the electrons' behavior in conduction. (lorentz gas model)" },
    { from: "boltzmann", to: "thomson", note: "Thomson found electron in 1897, which was an evidence for the existence of atoms." },
    { from: "boltzmann", to: "bose", note: "Bose discovered that if the contents of the lattice were completely indistinguishable, the manual remained valid, but a different method of counting was needed.)" },
    { from: "boltzmann", to: "perrin", note: "Jean Perrin's 1908–1909 experiments on Brownian motion provided definitive, quantitative evidence for the existence of atoms and molecules" },
    { from: "boltzmann", to: "schrodinger", note: "'His line of thought may be called my first love in science, No other has ever thus enraptured me or willever do so again'. His thesis advisor and director of the secondInstitute for Experimental Physics at the University of Vienna, Franz Serafin Exner, was an ardent admirer of Boltzmann (Schrödinger, centenary celebration of a polymat,chapter 2)" },
    { from: "boltzmann", to: "meitner", note: "'A fairly typical curriculum, it washighly unusual in one respect: all of it wastaught by just one person, the theoreticalphysicist Ludwig Boltzmann' (Lise Meitner : a life in physicsby Sime, Ruth Lewin)" },
    { from: "boltzmann", to: "dirac", note: "When Fermi and Dirac derived Fermi-Dirac statistics in 1926, they completely followed Boltzmann's combinatorial mathematical logic." },
    { from: "boltzmann", to: "fermi", note: "When Fermi and Dirac derived Fermi-Dirac statistics in 1926, they completely followed Boltzmann's combinatorial mathematical logic." },
    { from: "boltzmann", to: "fowler", note: "Fowler explored Darwin-Fowler Method : Mathematically proved that the 'most probable value' is always equal to the 'average value'. Freed from dependence on Stirling's Approximation, used saddle point approximation." },
    { from: "maxwell", to: "ehrenfest", note: "/" },
    { from: "maxwell", to: "thomson", note: "/" },
    { from: "maxwell", to: "planck", note: "/" },
    { from: "maxwell", to: "michelson", note: "/" },
    { from: "maxwell", to: "lorentz", note: "/" },
    { from: "maxwell", to: "einstein", note: "/" },
    { from: "maxwell", to: "bose", note: "/" },
    { from: "maxwell", to: "fowler", note: "/" },
    { from: "ehrenfest", to: "bohr", note: "/" },
    { from: "ehrenfest", to: "lorentz", note: "/" },
    { from: "ehrenfest", to: "einstein", note: "/" },
    { from: "ehrenfest", to: "ioffe", note: "/" },
    { from: "ehrenfest", to: "landau", note: "/" },
    { from: "ehrenfest", to: "meitner", note: "Lise Meitner stuided with Ehrenfest in Boltzmann's seminar in 1905." },
    { from: "ehrenfest", to: "dirac", note: "/" },
    { from: "ehrenfest", to: "fermi", note: "/" },
    { from: "thomson", to: "rutherford", note: "/" },
    { from: "thomson", to: "bohr", note: "/" },
    { from: "thomson", to: "oppenheimer", note: "/" },
    { from: "rutherford", to: "bohr", note: "/" },
    { from: "rutherford", to: "kapitsa", note: "/" },
    { from: "rutherford", to: "meitner", note: "/" },
    { from: "rutherford", to: "oppenheimer", note: "/" },
    { from: "rutherford", to: "fowler", note: "/" },
    { from: "planck", to: "bohr", note: "/" },
    { from: "planck", to: "lorentz", note: "/" },
    { from: "planck", to: "einstein", note: "Light Quantum Hypothesis" },
    { from: "planck", to: "schrodinger", note: "/" },
    { from: "planck", to: "heisenberg", note: "/" },
    { from: "planck", to: "meitner", note: "/" },
    { from: "bohr", to: "einstein", note: "/" },
    { from: "bohr", to: "born", note: "/" },
    { from: "bohr", to: "landau", note: "/" },
    { from: "bohr", to: "pauli", note: "/" },
    { from: "bohr", to: "schrodinger", note: "/" },
    { from: "bohr", to: "heiseinberg", note: "/" },
    { from: "bohr", to: "meitner", note: "/" },
    { from: "bohr", to: "dirac", note: "/" },
    { from: "michelson", to: "lorentz", note: "/" },
    { from: "lorentz", to: "einstein", note: "/" },
    { from: "lorentz", to: "ioffe", note: "/" },
    { from: "lorentz", to: "pauli", note: "/" },
    { from: "lorentz", to: "dirac", note: "/" },
    { from: "einstein", to: "bose", note: "/" },
    { from: "einstein", to: "de_Broglie", note: "/" },
    { from: "einstein", to: "perrin", note: "/" },
    { from: "einstein", to: "dirac", note: "/" },
    { from: "einstein", to: "chandrasekhar", note: "/" },
    { from: "einstein", to: "meitner", note: "/" },
    { from: "bose", to: "landau", note: "/" },
    { from: "bose", to: "kapitsa", note: "/" },
    { from: "bose", to: "fermi", note: "/" },
    { from: "bose", to: "dirac", note: "/" },
    { from: "bose", to: "pauli", note: "?" },
    
        ];

/* --- 初始化与布局 --- */
const mainGroup = document.getElementById('main-group');
const svg = document.getElementById('scene');

nodes.forEach((node, i) => {
    const gCfg = groups[node.group];
    node.x = gCfg.x + (i % 3) * 120;
    node.y = gCfg.y + Math.floor(i / 3) * 100;
});

links.forEach(link => {
    const s = nodes.find(n => n.id === link.from);
    const t = nodes.find(n => n.id === link.to);
    if (!s || !t) return;
    const lEl = document.createElementNS("http://www.w3.org/2000/svg", "line");
    lEl.setAttribute("class", `link l-${link.from} l-${link.to}`);
    lEl.setAttribute("x1", s.x); lEl.setAttribute("y1", s.y);
    lEl.setAttribute("x2", t.x); lEl.setAttribute("y2", t.y);
    mainGroup.appendChild(lEl);
});

nodes.forEach(node => {
    const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
    g.setAttribute("class", "node");
    const circ = document.createElementNS("http://www.w3.org/2000/svg", "circle");
    circ.setAttribute("cx", node.x); circ.setAttribute("cy", node.y); circ.setAttribute("r", 10);
    const txt = document.createElementNS("http://www.w3.org/2000/svg", "text");
    txt.setAttribute("x", node.x); txt.setAttribute("y", node.y + 25);
    txt.setAttribute("text-anchor", "middle"); txt.setAttribute("class", "node-text");
    txt.textContent = node.label;
    g.appendChild(circ); g.appendChild(txt);
    g.onclick = (e) => { e.stopPropagation(); clickNode(node); };
    mainGroup.appendChild(g);
});

/* --- 交互控制 --- */
let scale = 1, tx = 0, ty = 0;
let isDragging = false, startX, startY;

const updateTransform = () => {
    mainGroup.setAttribute("transform", `translate(${tx},${ty}) scale(${scale})`);
};

function manualZoom(factor) {
    const oldScale = scale;
    scale *= factor;
    scale = Math.min(Math.max(scale, 0.2), 4); // 限制范围

    const rect = svg.getBoundingClientRect();
    const cx = rect.width / 2;
    const cy = rect.height / 2;
    
    tx = cx - (cx - tx) * (scale / oldScale);
    ty = cy - (cy - ty) * (scale / oldScale);
    updateTransform();
}

svg.onmousedown = (e) => {
    if(e.button !== 0) return;
    isDragging = true;
    startX = e.clientX - tx;
    startY = e.clientY - ty;
};

window.onmousemove = (e) => {
    if (!isDragging) return;
    tx = e.clientX - startX;
    ty = e.clientY - startY;
    updateTransform();
};

window.onmouseup = () => isDragging = false;

// 降低滚轮灵敏度
svg.onwheel = (e) => {
    e.preventDefault();
    const oldScale = scale;
    const delta = e.deltaY > 0 ? 0.96 : 1.04; // 极其微小的缩放
    scale *= delta;
    scale = Math.min(Math.max(scale, 0.2), 4);

    const rect = svg.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;

    tx = mouseX - (mouseX - tx) * (scale / oldScale);
    ty = mouseY - (mouseY - ty) * (scale / oldScale);
    updateTransform();
};

function clickNode(node) {
    // 1. 隐藏欢迎语，显示详情面板
    document.getElementById('intro').style.display = 'none';
    const det = document.getElementById('details');
    det.style.display = 'block';

    // 2. 填充基本信息：姓名和生平
    document.getElementById('s-name').textContent = node.label;
    document.getElementById('s-bio').innerHTML = node.bio;

    // 3. 高亮显示与该科学家相关的连线
    document.querySelectorAll('.link').forEach(l => l.classList.remove('active'));
    document.querySelectorAll(`.l-${node.id}`).forEach(l => l.classList.add('active'));

    // 4. 【关键步骤】：提取并显示连线中的文字（Relations）
    const rels = links.filter(l => l.from === node.id || l.to === node.id);
    document.getElementById('s-links').innerHTML = rels.map(r => {
        const otherId = r.from === node.id ? r.to : r.from;
        const otherNode = nodes.find(n => n.id === otherId);
        // 如果找不到对方节点（比如拼写错误），就不显示
        if (!otherNode) return ''; 
        return `<div class="relation-box"><strong>Connection with ${otherNode.label}:</strong><br>${r.note}</div>`;
    }).join('');

    // 5. 触发 MathJax 渲染公式
    if (window.MathJax && window.MathJax.typeset) {
        MathJax.typeset();
    }
}
</script>
</body>
</html>
